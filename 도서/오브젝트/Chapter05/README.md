# 05. 책임 할당하기
## 데이터 중심 설계의 문제점
* 객체에 상태에 초점을 맞춰서 캡슐화를 위반하기 쉽다.
* 요소들 사이의 결합도가 높아진다.
* 코드를 변경하기 어려워진다.

## 데이터 중심 설계의 문제점 해결 방법
* 데이터가 아닌 책임에 초점을 맞춰서 책임 중심 설계를 해야 한다.

## GRASP 패턴
* 각 객체에 책임을 부여하는 것으로 책임을 부여하는 원칙들을 말하고 있는 패턴이다.
* 구체적인 구조는 없지만 총 9가지의 원칙이 있다.

## 01. 책임 주도 설계를 향해
데이터 중심의 설계에서 책임 중심의 설계로 전환하기 위해서는 다음의 두 가지 원칙을 따라야 한다.
* 데이터보다 행동을 먼저 결정하라
* 협력이라는 문맥 안에서 책임을 결정하라

### 데이터보다 행동을 먼저 결정하라
* 책임 중심의 설계에서는 `이 객체가 수행해야 하는 책임은 무엇인가`를 결정한 후에 `이 책임을 수행하는 데 필요한 데이터는 무엇인가`를 결정하는데 객체의 행동, 즉 책임을 먼저 결정한 후에 객체의 상태를 결정한다.
* 객체지향 설계에서는 객체에게 적절한 책임을 할당해야 하는데 `객체에게 어떤 책임을 할당해야 하는가?`의 해결은 협력에서 찾을 수 있다.

### 협력이라는 문맥 안에서 책임을 결정하라
* 객체에게 할당된 책임이 협력에 어울리지 않는다면 그 책임은 나쁜 것이며, 객체에게 할당된 책임이 조금 어색해 보이더라도 협력에 적합하다면 그 책임은 좋은 것이기 때문에 `책임은 객체의 입장이 아니라 객체가 참여하는 협력에 적합`해야 한다.
* 객체를 가지고 있기 때문에 메시지를 보내는 것이 아니며, 메시지를 전송하기 때문에 객체를 갖게 된 것이기 때문에 `객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택`해야 한다.

### 책임 주도 설계
책임 주도 설계의 흐름은 아래와 같다.
* 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
* 시스템 책임을 더 작은 책임으로 분할한다.
* 분할된 책임을 수행할 수 있는 적절한 객체 또는 열학을 찾아 책임을 할당한다.
* 객체가 책임을 수행하는 도중 가른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
* 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

`책임 주도 설계의 핵심은 책임을 결정한 후에 책임을 수행할 객체를 결정`하는 것이다.

## 02. 책임 할당을 위한 GRASP 패턴
GRASP 패턴은 "General Responsibility Assignment Software Pattern(일반적인 책임 할당을 위한 소프트웨어 패턴)"의 약자로 `객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리`한 것이다.

### 도메인 개념에서 출발하기
* 설계를 시작하기 전에 도메인에 대한 개략적인 모습을 그려 보는 것이 유용한데, 도메인 안에서는 많은 개념들이 존재해서 도메인 개념들을 할당의 대상으로 사용하면 코드에 도메인의 모습을 투영하기 수월해진다.


<img src="./image/그림%205.1.png">