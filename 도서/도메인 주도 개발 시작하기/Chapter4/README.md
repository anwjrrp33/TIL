# 리포지터리와 모델 구현

## JPA를 이용한 리포지터리 구현
* 도메인 모델과 리포지터리를 구현할 떄 선호하는 기술을 꼽으면 JPA를 들 수 있다.
* 데이터 보관소로 RDBMS를 사용할 때 객체 기반의 도메인 모델과 관계형 데이터 모델 간의 매핑을 처리하는 기술로 ORM 만한 것이 없다.

### 모듈 위치
* 리포지터리 인터페이스는 애그리거트와 같이 도메인 영역에 속하고, 리포지터리를 구현한 클래스는 인프라스트럭처 영역에 속한다.
<br/><img src="./그림 4.1.png">

### 리포지터리 기본 기능 구현
* 리포지터리가 제공하는 기본 기능
    * ID로 애그리거트 조회하기
    * 애그리거트 저장하기
    ```
    public interface OrderRespository {
        Order findById(OrderNo no);
        void save(Order order);
    }
    ```
* 인터페이스는 애그리거트 루트를 기준으로 작성한다.
* 애그리거트를 조회하는 기능의 이름을 작성할 때 널리 사용되는 규칙은 `findBy프로퍼티이름(프로퍼티 값)` 형식이다.
* 애그리거트를 조회할 때 존재하지 않으면 null을 리턴하는데 null을 사용하고 싶지 않으면 Optional을 사용한다.
```
Optional<Order> findById(OrderNo no);
```